<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reference · JCheck.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">JCheck.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li class="is-active"><a class="tocitem" href>Reference</a><ul class="internal"><li><a class="tocitem" href="#Quickcheck"><span>Quickcheck</span></a></li><li><a class="tocitem" href="#Failed-Cases-Analysis"><span>Failed Cases Analysis</span></a></li><li><a class="tocitem" href="#Random-Input-Generation"><span>Random Input Generation</span></a></li><li><a class="tocitem" href="#Shrinkage"><span>Shrinkage</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Reference</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reference</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ps-pat/JCheck.jl/blob/master/docs/src/reference.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Reference"><a class="docs-heading-anchor" href="#Reference">Reference</a><a id="Reference-1"></a><a class="docs-heading-anchor-permalink" href="#Reference" title="Permalink"></a></h1><h2 id="Quickcheck"><a class="docs-heading-anchor" href="#Quickcheck">Quickcheck</a><a id="Quickcheck-1"></a><a class="docs-heading-anchor-permalink" href="#Quickcheck" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="JCheck.Quickcheck" href="#JCheck.Quickcheck"><code>JCheck.Quickcheck</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Quickcheck</code></pre><p>Contain a set of property to check through the generation of random input.</p><p><strong>Fields</strong></p><ul><li><code>description::AbstractString</code>: description for the instance.</li><li><code>rng::AbstractRNG</code>: PRNG used to generate inputs.</li><li><code>predicates::PredsAssoc</code>: predicates to check.</li><li><code>variables::ArgsDict</code>: Arguments used by the predicates.</li><li><code>n::Int</code>: Number of random inputs to generate.</li><li><code>serialize_fails::Bool</code>: If true, serialize failing inputs to a JLSO file.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/Quickcheck.jl#L21-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JCheck.Quickcheck-Tuple{AbstractString}" href="#JCheck.Quickcheck-Tuple{AbstractString}"><code>JCheck.Quickcheck</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">Quickcheck(desc; rng=GLOBAL_RNG, n=100, serialize_fails=true)</code></pre><p>Constructor for type <a href="#JCheck.Quickcheck"><code>Quickcheck</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>desc::AbstractString</code>: description for the instance.</li><li><code>rng::AbstractRNG</code>: PRNG used to generate inputs.</li><li><code>n::Int</code>: Number of random inputs to generate.</li><li><code>serialize_fails::Bool</code>: If true, serialize failing inputs to a JLSO file.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; qc = Quickcheck(&quot;A Test&quot;)
A Test: 0 predicate and 0 free variable.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/Quickcheck.jl#L54-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JCheck.@add_predicate-Tuple{Any, Any, Any}" href="#JCheck.@add_predicate-Tuple{Any, Any, Any}"><code>JCheck.@add_predicate</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@add_predicate qc desc pred</code></pre><p>Add the predicate <code>pred</code> to the set of tests <code>qc</code> with description <code>desc</code>.</p><p><strong>Arguments</strong></p><ul><li><code>qc</code>: Object of type <a href="#Quickcheck"><code>Quickcheck</code></a>.</li><li><code>desc</code>: String describing the predicate.</li><li><code>pred</code>: Predicate in the form of an <a href="https://docs.julialang.org/en/v1/manual/functions/#man-anonymous-functions">anonymous function</a>.</li></ul><p><strong>Notes</strong></p><p>The form of <code>pred</code> is very strict:</p><ul><li>It has to be an anonymous function. Formally, it should be an <code>Expr</code> of type <code>-&gt;</code>.</li><li>The type of each argument appearing on the left-hand side of <code>pred</code> has to be specified with the <code>x::Type</code> syntax.</li><li>The names of the arguments of <code>pred</code> matter! Specifically, in a given <a href="#Quickcheck"><code>Quickcheck</code></a> object, the type of every argument must be consistent across predicates (see examples).</li><li>Each predicate stored in a given <a href="#Quickcheck"><code>Quickcheck</code></a> object must be given a distinct description.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; qc = Quickcheck(&quot;A Test&quot;)
A Test: 0 predicate and 0 free variable.

julia&gt; @add_predicate qc &quot;Identity&quot; (x::Float64 -&gt; x == x)
A Test: 1 predicate and 1 free variable.
x::Float64

julia&gt; @add_predicate qc &quot;Sum commute&quot; ((n::Int, x::Float64) -&gt; n + x == x + n)
A Test: 2 predicates and 2 free variables:
n::Int64
x::Float64

julia&gt; @add_predicate qc &quot;Is odd&quot; isodd(x)
ERROR: Predicate declaration must have the form of an anonymous function (... -&gt; ...)
[...]

julia&gt; @add_predicate qc &quot;Is odd&quot; (x::Int -&gt; is_odd(x))
ERROR: A declaration for variable x already exists with type Float64; please choose another name for x
[...]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/Quickcheck.jl#L111-L157">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JCheck.@quickcheck-Tuple{Any, AbstractString}" href="#JCheck.@quickcheck-Tuple{Any, AbstractString}"><code>JCheck.@quickcheck</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@quickcheck qc [file_id::AbstractString=&quot;yyyy-mm-dd_HH-MM-SS&quot;]</code></pre><p>Check the properties specified in object <code>qc</code> of type <a href="#JCheck.Quickcheck"><code>Quickcheck</code></a>.</p><p>If <code>qc.serialize_fails</code> is <code>true</code>, serialize the failing cases to <code>JCheck_&lt;file_id&gt;.jchk</code>. Those can latter be analyzed using <a href="#JCheck.load-Tuple{Union{AbstractString, IO, FilePathsBase.AbstractPath}}"><code>load</code></a> and <a href="#JCheck.@getcases-Tuple{Any, Vararg{Any}}"><code>@getcases</code></a>.</p><p><strong>Note</strong></p><p>If no argument <code>file_id</code> is passed, defaults to current time.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/Quickcheck.jl#L353-L365">source</a></section></article><h2 id="Failed-Cases-Analysis"><a class="docs-heading-anchor" href="#Failed-Cases-Analysis">Failed Cases Analysis</a><a id="Failed-Cases-Analysis-1"></a><a class="docs-heading-anchor-permalink" href="#Failed-Cases-Analysis" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="JCheck.FailedTests" href="#JCheck.FailedTests"><code>JCheck.FailedTests</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">FailedTests</code></pre><p>Container for failed tests from a <a href="#JCheck.@quickcheck-Tuple{Any, AbstractString}"><code>@quickcheck</code></a> run. Wrapper around a <code>Dict{Symbol, Any}</code> used for dispatch.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/FailedTests.jl#L16-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JCheck.load-Tuple{Union{AbstractString, IO, FilePathsBase.AbstractPath}}" href="#JCheck.load-Tuple{Union{AbstractString, IO, FilePathsBase.AbstractPath}}"><code>JCheck.load</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load(io)</code></pre><p>Load a collection of failed test cases serialized by a <a href="#JCheck.@quickcheck-Tuple{Any, AbstractString}"><code>@quickcheck</code></a> run.  Argument <code>io</code> can be of type <code>IO</code>, <code>AbstractString</code> or <code>AbstractPath</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; ft = JCheck.load(&quot;JCheck_test.jchk&quot;)
2 failing predicates:
Product commute
Is odd</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/FailedTests.jl#L26-L40">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JCheck.@getcases-Tuple{Any, Vararg{Any}}" href="#JCheck.@getcases-Tuple{Any, Vararg{Any}}"><code>JCheck.@getcases</code></a> — <span class="docstring-category">Macro</span></header><section><div><pre><code class="language-julia hljs">@getcases ft, desc...</code></pre><p>Get the predicate with description <code>desc</code> and the valuations for which it failed.</p><p><strong>Note</strong></p><p>The predicate with description closest to the one given (in the sense of the Levenshtein distance) will be returned; there is no need to pass the exact description.</p><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; ft = JCheck.load(&quot;JCheck_test.jchk&quot;)
2 failing predicates:
Product commute
Is odd

julia&gt; pred, valuations = @getcases ft iod
NamedTuple{(:predicate, :valuations), Tuple{Function, Vector{Tuple}}}((Serialization.__deserialized_types__.var&quot;#3#4&quot;(), Tuple[(0,), (-9223372036854775808,), (6444904272543528628,)]))

julia&gt; map(x -&gt; pred(x...), valuations)
3-element Vector{Bool}:
 0
 0
 0</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/FailedTests.jl#L58-L85">source</a></section></article><h2 id="Random-Input-Generation"><a class="docs-heading-anchor" href="#Random-Input-Generation">Random Input Generation</a><a id="Random-Input-Generation-1"></a><a class="docs-heading-anchor-permalink" href="#Random-Input-Generation" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="JCheck.generate" href="#JCheck.generate"><code>JCheck.generate</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">generate([rng=GLOBAL_RNG], T, n)</code></pre><p>Sample <code>n</code> random instances of type <code>T</code>.</p><p><strong>Arguments</strong></p><ul><li><code>rng::AbstractRNG</code>: random number generator to use.</li><li><code>T::Type</code>: type of the instances.</li><li><code>n::Int</code>: number of realizations to sample.</li></ul><p><strong>Default generators</strong></p><p><code>generate</code> methods for the following types are shipped with this package:</p><ul><li>Subtypes of <code>AbstractFloat</code></li><li>Subtypes of <code>Signed</code> except <code>BigInt</code></li><li>Subtypes of <code>Unsigned</code></li><li><code>Complex{T &lt;: Real}</code> where <code>T</code> is any subtype of <code>Real</code> for which a <code>generate</code> method exists</li><li><code>Bool</code></li><li><code>String</code></li><li><code>Char</code></li><li><code>Array{T, N}</code> where <code>T</code> is any type for which a <code>generate</code> method exists</li></ul><p><strong>Implementation</strong></p><p>When implementing <code>generate</code> for your type <code>T</code> keep the following in mind:</p><ul><li>Your method should return a <code>Vector{T}</code></li><li>It is not necessary to write <code>generate(T, n)</code> or <code>generate([rng, ]Array{T, N}, n) where N</code>; this is handled automatically. You only need to implement <code>generate(::AbstractRNG, ::Type{T}, ::Int)</code></li><li>Consider implementing <a href="#JCheck.specialcases-Tuple{Type}"><code>specialcases</code></a> and <a href="#JCheck.shrink-Tuple{Any}"><code>shrink</code></a> for <code>T</code> as well.</li></ul><p><strong>Arrays &amp; Strings</strong></p><p>General purpose generators for arrays and strings are a little bit tricky to implement given that a length for each sampled element must be specified. The following choices have been made for the default generators shipped with this package:</p><ul><li><code>String</code>: The length of each string is approximately exponentially distributed with mean 64.</li><li><code>Array{T, N}</code>: The length of each dimension of a given array is approximately exponentially distributed with mean 24 ÷ N + 1 (in a low effort attempt to keep the number of entries manageable).</li></ul><p>If this is not appropriate for your needs, don&#39;t hesitate to reimplement <code>generate</code>.</p><p><strong>Examples</strong></p><pre><code class="language-julia hljs">using Random: Xoshiro

rng = Xoshiro(42)

generate(rng, Float32, 10)

# output

10-element Vector{Float32}:
 -1.5388016f7
 -5.3113024f-19
 -1.3960648f35
  1.5957566f31
 -4.381218f26
  2.380078f35
  3.878954f9
 -1.1950524f-7
  7.525897f24
 -3.1891005f-12</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/generate.jl#L8-L76">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JCheck.specialcases-Tuple{Type}" href="#JCheck.specialcases-Tuple{Type}"><code>JCheck.specialcases</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">specialcases(T)</code></pre><p>Non-random inputs that are always checked by <a href="#JCheck.@quickcheck-Tuple{Any, AbstractString}"><code>@quickcheck</code></a>.</p><p><strong>Arguments</strong></p><ul><li><code>T::Type</code>: type of the inputs.</li></ul><p><strong>Implementation</strong></p><ul><li>Your method should return a <code>Vector{T}</code></li><li>Useless without a <a href="#JCheck.generate"><code>generate</code></a> method for <code>T</code>.</li><li>Be mindful of combinatoric explosion! <a href="#JCheck.@quickcheck-Tuple{Any, AbstractString}"><code>@quickcheck</code></a> generate an input for each element of the Cartesian product of the special cases of every arguments of the predicates it is trying to falsify. Only include special cases that are <em>truly</em> special.</li></ul><p><strong>Examples</strong></p><pre><code class="language-julia-repl hljs">julia&gt; specialcases(Int)
4-element Vector{Int64}:
                    0
                    1
 -9223372036854775808
  9223372036854775807

julia&gt; specialcases(Float64)
4-element Vector{Float64}:
   0.0
   1.0
 -Inf
  Inf</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/generate.jl#L82-L116">source</a></section></article><h2 id="Shrinkage"><a class="docs-heading-anchor" href="#Shrinkage">Shrinkage</a><a id="Shrinkage-1"></a><a class="docs-heading-anchor-permalink" href="#Shrinkage" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="JCheck.shrink-Tuple{Any}" href="#JCheck.shrink-Tuple{Any}"><code>JCheck.shrink</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">shrink(x)</code></pre><p>Shrink an input. The returned value is a <code>Vector</code> with elements <code>similar</code> to <code>x</code>. Returning a vector of length 1 is interpreted as meaning that no further shrinkage is possible.</p><p><strong>Default Shrinkers</strong></p><p><code>shrink</code> methods for the following types are shipped with this package:</p><ul><li><code>AbstractString</code></li><li><code>AbstractArray{T, N}</code> for any <code>T</code> and <code>N</code></li></ul><p><strong>Implementation</strong></p><ul><li>Any implementation of <code>shrink(x::T)</code> must come with an implementation of <a href="@ref"><code>shrinkable(x::T)</code></a>. Failure to do so will prevent <a href="#JCheck.@quickcheck-Tuple{Any, AbstractString}"><code>@quickcheck</code></a> from calling <code>shrink</code> on an object of type <code>T</code>.</li><li><code>shrink(x)</code> must return [x] if <code>shrinkable(x)</code> evaluate to <code>false</code>. We suggest that the first line of your method is something like   shrinkable(x) || return typeof(x)[x]</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/shrink.jl#L5-L24">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="JCheck.shrinkable-Tuple{Any}" href="#JCheck.shrinkable-Tuple{Any}"><code>JCheck.shrinkable</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">shrinkable(x)</code></pre><p>Determines if <code>x</code> is shrinkable.</p><p><strong>Note</strong></p><p>Shrinkage can easily be disabled for type <code>T</code> using overloading:     shrinkable(x::T) = false</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/ps-pat/JCheck.jl/blob/84b13fec0481044e5584a509f01a7af3d1b242f2/src/shrink.jl#L82-L90">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.14 on <span class="colophon-date" title="Thursday 3 March 2022 15:59">Thursday 3 March 2022</span>. Using Julia version 1.7.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
